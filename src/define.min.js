(function(d,e){var f,c,b,a;f=function(j,i,k){var g,h;if(d.isPlainObject(arguments[0])){g=arguments[0];if(g.config){f.config(g.config);delete g.config}d.each(g,function(l,m){if(m&&m.require&&m.define){f(l,m.require,m.define)}else{f(l,m)}});return e}if(d.isArray(arguments[0])){return new b({require:arguments[0],module:arguments[1]})}h={};h.name=j.toLowerCase();if(d.isArray(arguments[1])){h.require=arguments[1];h.module=arguments[2]}else{h.module=arguments[1]}if(h.module===null){delete c.modules[h.name];return e}if(c.modules[h.name]&&c.modules[h.name].module){throw ("Duplicate module definition. Module name: "+h.name)}c.modules[h.name]=new b(h);return c.modules[h.name]};d.extend(f,{version:"1.0",noConflict:function(){window.define=a;return f},config:function(g){d.extend(c.config,g)}});c={modules:{},pathTestPattern:/(\.js|\.css|\.htm|\.html)$/i,config:{baseUrl:"",alias:{},load:function(i,h,g){throw ("load must be set in the config options. Resources to load: "+i)}},load:function(i){var g,h=[];i=d.isArray(i)?i:[i];d.each(i,function(j,k){h.push(c.parseLoadAlias(k))});g=new d.Deferred();c.config.load(h,function(){g.resolve.apply(this,arguments)},function(){g.reject.apply(this,arguments)});return g},parseLoadAlias:function(i){var h,g;if(c.isAbsolutePath(i)){return i}h=i.split("/");g=c.config.alias[h[0]];if(g){h[0]=g;i=h.join("/").replace("//","/");return c.parseLoadAlias(i)}return c.config.baseUrl+i},isAbsolutePath:function(g){if(g.indexOf("/")===0||g.indexOf("http")===0){return true}},isModuleName:function(g){return !c.pathTestPattern.test(g)}};b=function(g){d.extend(this,g);if(!this.name){this.load()}};b.prototype={name:null,require:[],module:null,instance:false,load:function(){var i,g,k,j,h;h=this;i=new d.Deferred();if(this.instance!==false){i.resolve(h);return i}k=[];j=[];g={};this.require=d.isArray(this.require)?this.require:[this.require];d.each(this.require,function(n,m){var o,l;m=m.toLowerCase();if(c.isModuleName(m)){o=c.modules[m];if(!o){throw ("A required module is not registered - module name: "+m)}l=new d.Deferred();o.load().then(function(p){g[p.name]=p.instance;l.resolve()});j.push(l)}else{k.push(m)}});k.length>0&&j.push(c.load(k));d.when.apply(d,j).then(function(){var l,m;m=[];d.each(h.require,function(o,n){n=n.toLowerCase();g[n]&&m.push(g[n])});h.instance=d.isFunction(h.module)?h.module.apply(h.module,m):h.module;if(h.module===null&&k.length>0){l=c.modules[h.name];l.load().then(function(){i.resolve(l)})}else{i.resolve(h)}}).fail(function(l){throw l||"Definition failed."});return i}};a=window.define;window.define=f})(jQuery);